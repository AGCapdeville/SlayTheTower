(this.webpackJsonpslay_the_tower=this.webpackJsonpslay_the_tower||[]).push([[0],{12:function(e,t,a){e.exports={game:"encounter_game__yzKOw",playerZone:"encounter_playerZone__3yjCe",combatZoneOverlay:"encounter_combatZoneOverlay__3slAz",combatMsgs:"encounter_combatMsgs__yc8IO"}},15:function(e,t,a){e.exports={game:"title_game__SBTC3",menu:"title_menu__k0cn0",title:"title_title__1NJAt"}},16:function(e,t,a){e.exports={drawZone:"draw-zone_drawZone__29T8p",energy:"draw-zone_energy__1txD3",deck:"draw-zone_deck__3wxHk",devButton:"draw-zone_devButton__lMg0t"}},17:function(e,t,a){e.exports={discardZone:"discard-zone_discardZone__ebvxy",void:"discard-zone_void__3aCqG",discard:"discard-zone_discard__1RQku",devButton:"discard-zone_devButton__qShdt"}},21:function(e,t,a){e.exports={playerHealthBorder:"player-health_playerHealthBorder__3CNh9",playerHealthIndicator:"player-health_playerHealthIndicator__2DJ9t"}},25:function(e,t,a){},28:function(e,t,a){e.exports=a(42)},33:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var n,r,c=a(0),o=a.n(c),l=a(14),i=a.n(l),d=(a(33),a(15)),u=a.n(d),s=a(3),m=a(44),f=a(43),h=a(1),g=a(6),v=Object(m.a)("screen/SET_SCREEN"),p=Object(f.a)(Object(s.a)({},v,(function(e,t){return t.payload})),"Title"),y=Object(g.a)((function(e){return e.screen}),(function(e){return e})),b=a(4),_=a(2),O=a(13),E=[{name:"Slime",art:"https://i.imgur.com/Sun4iBT.png?1",health:36,total:36,armor:0,telegraphing:[{name:["Spit"],order:0,target:["hero"],effect:["damage"],power:[8]}],moves:[{name:["Spit"],order:0,target:["hero"],effect:["damage"],power:[8]},{name:["Whip"],order:1,target:["hero"],effect:["damage"],power:[13]},{name:["Soften"],order:2,target:["self"],effect:["armor"],power:[12]}]},{name:"Living Armor",art:"https://i.imgur.com/yl0eGRj.png?4",health:55,total:55,armor:0,telegraphing:[{name:["Lunging Strike"],order:0,target:["hero"],effect:["damage"],power:[30]}],moves:[{name:["Lunging Strike"],order:0,target:["hero"],effect:["damage"],power:[30]},{name:["Defensive Mode"],order:1,target:["self"],effect:["wait"],power:[0]},{name:["Repair"],order:2,target:["self"],effect:["heal"],power:[20]},{name:["Offensive Mode"],order:3,target:["self"],effect:["wait"],power:[0]}]}],j=Object(m.a)("foe/SPAWN_FOE"),w=Object(m.a)("foe/UPDATE_FOE"),T=Object(f.a)((n={},Object(s.a)(n,j,(function(e){return Object(_.a)({},e,{},E[0])})),Object(s.a)(n,w,(function(e,t){return Object(_.a)({},e,{},t.payload)})),n),{}),N=Object(g.a)((function(e){return e.foe}),(function(e){return e})),k=function(){return Object(h.c)(N)},B=Object(m.a)("player/UPDATE_PLAYER"),H=Object(m.a)("player/SET_DECK"),I=Object(m.a)("player/DRAW_CARD"),D=Object(m.a)("player/PLAY_CARD"),A=Object(m.a)("player/PLAY_INDEXED_CARD"),C=Object(m.a)("player/DISCARD_HAND"),S=Object(m.a)("player/VOID_CARD"),M=Object(m.a)("player/SHUFFLE_DECK"),R=Object(m.a)("player/DRAW_HAND");function Z(e){var t,a,n;for(n=e.length-1;n>0;n--)t=Math.floor(Math.random()*(n+1)),a=e[n],e[n]=e[t],e[t]=a;return e}var z=Object(f.a)((r={},Object(s.a)(r,R,(function(e){return Object(_.a)({},e,{deck:e.deck.slice(0,e.deck.length-5),hand:[].concat(Object(b.a)(e.hand),Object(b.a)(e.deck.slice(-5)))})})),Object(s.a)(r,M,(function(e){return Object(_.a)({},e,{deck:Z(e.deck)})})),Object(s.a)(r,B,(function(e,t){return Object(_.a)({},e,{},t.payload)})),Object(s.a)(r,H,(function(e,t){return Object(_.a)({},e,{deck:t.payload})})),Object(s.a)(r,I,(function(e){var t=e.discard,a=e.deck,n=e.hand,r=Object(O.a)(e,["discard","deck","hand"]);if(0==a.length){if(0==t.length)return Object(_.a)({},r,{discard:t,deck:a,hand:n});var c=Z(t),o=c[c.length-1],l=c.slice(0,c.length-1),i=[].concat(Object(b.a)(n),[o]);return Object(_.a)({},r,{hand:i,deck:l,discard:[]})}return Object(_.a)({},r,{hand:[].concat(Object(b.a)(n),[a[a.length-1]]),deck:a.slice(0,a.length-1),discard:t})})),Object(s.a)(r,D,(function(e){var t=e.discard,a=e.hand,n=Object(O.a)(e,["discard","hand"]);if(a.length<1)return Object(_.a)({},n,{hand:a,discard:t});var r=a.slice(0,a.length-1),c=[].concat(Object(b.a)(t),[a[a.length-1]]);return Object(_.a)({},n,{hand:r,discard:c})})),Object(s.a)(r,A,(function(e,t){var a=t.payload,n=e.discard,r=e.hand,c=Object(O.a)(e,["discard","hand"]),o=r.length<1;if(console.log(a),o)return Object(_.a)({},c,{hand:r,discard:n});var l=r[a];r.splice(a,1);var i=r,d=[].concat(Object(b.a)(n),[l]);return Object(_.a)({},c,{hand:i,discard:d})})),Object(s.a)(r,C,(function(e){var t=e.discard,a=e.hand,n=Object(O.a)(e,["discard","hand"]);if(a.length<1)return Object(_.a)({},n,{hand:a,discard:t});var r=[].concat(Object(b.a)(t),Object(b.a)(a));return Object(_.a)({},n,{hand:[],discard:r})})),Object(s.a)(r,S,(function(e,t){return Object(_.a)({},e,{hand:e.hand.slice(t.payload,1),voidPile:[].concat(Object(b.a)(e.void),[e.hand.slice(t.payload,1)])})})),r),{}),x=Object(g.a)((function(e){return e.player}),(function(e){return e})),L=function(){return Object(h.c)(x)},P=[{name:"Slash",art:"<art url>",type:"attack",energy:1,exhaust:!1,action:{target:["foe"],effect:["damage"],power:[5]},description:"Deal 5 damage",card_id:0},{name:"Guard",art:"<art url>",type:"defend",energy:1,exhaust:!1,action:{target:["hero"],effect:["armor"],power:[5]},description:"+5 Armor",card_id:1},{name:"Heal",art:"<art url>",type:"skill",energy:2,exhaust:!0,action:{target:["hero"],effect:["heal"],power:[8]},description:"Heal 8 damage",card_id:2}],W=[{hero:"sword",health:55,maxHealth:55,energy:3,armor:0,deck:[0,0,0,0,0,1,1,1,1,1,2].map((function(e){return P[e]})),hand:[],discard:[],void:[]},{hero:"fire",health:45,maxHealth:45,energy:4,armor:0,deck:[0,0,0,0,0,1,1,1,1,1,2].map((function(e){return P[e]})),hand:[],discard:[],void:[]}],Y=function(){var e=Object(h.b)();return e(B(W[0])),o.a.createElement("div",{className:u.a.game},o.a.createElement("div",{className:u.a.title},"SLAY THE TOWER"),o.a.createElement("div",{className:u.a.menu,onClick:function(){return e(v("Encounter"))}}," START ENCOUNTER"))},F=a(12),U=a.n(F),G=a(7),q=a.n(G),J=function(){var e=L(),t=Object(h.b)(),a=function(e){return t((a=e,function(e,t){var n=t(),r=n.player.hand[a],c=r.energy,o=n.foe.armor;if(c<=n.player.energy){var l=n.player.energy-c;if("foe"==r.action.target){if("damage"==r.action.effect){var i=o-r.action.power;if(i<0){var d=parseInt(n.foe.health)+parseInt(i);e(w({health:d,armor:0}))}else e(w({armor:i}));e(B({energy:l}))}}else if("heal"==r.action.effect){var u=r.action.power,s=parseInt(n.player.health)+parseInt(u);e(B({health:s,energy:l}))}else if("armor"==r.action.effect){var m=r.action.power,f=parseInt(n.player.armor)+parseInt(m);e(B({armor:f,energy:l}))}e(A(a))}else console.log("! Not Enough Energy !")}));var a};return o.a.createElement("div",null,e.hand.map((function(e,t){return o.a.createElement("button",{onClick:function(){return a(t)},className:q.a.customButton},o.a.createElement("div",{className:q.a.card},o.a.createElement("div",{className:q.a.titleSection},o.a.createElement("div",{className:q.a.title},e.name),o.a.createElement("div",{className:q.a.energy},e.energy)),o.a.createElement("br",null),e.art,o.a.createElement("br",null)," ",o.a.createElement("br",null),e.description))})))},K=function(){Object(h.b)();return o.a.createElement("div",{className:q.a.activeZone},o.a.createElement("div",{className:q.a.hand},o.a.createElement(J,null)))},V=a(16),Q=a.n(V),X=function(){var e=L();Object(h.b)();return o.a.createElement("div",{className:Q.a.drawZone},o.a.createElement("div",{className:Q.a.energy},"ENERGY:",o.a.createElement("div",null),e.energy),o.a.createElement("div",{className:Q.a.deck},"DECK: ",o.a.createElement("div",null)," ",e.deck.length))},$=a(17),ee=a.n($),te=function(){var e=L();Object(h.b)();return o.a.createElement("div",{className:ee.a.discardZone},o.a.createElement("div",{className:ee.a.void},"VOID: ",o.a.createElement("div",null)," ",e.void.length),o.a.createElement("div",{className:ee.a.discard},"DISCARD: ",o.a.createElement("div",null)," ",e.discard.length))},ae=a(21),ne=a.n(ae);var re=function(){var e=L();return Object(c.useEffect)((function(){!function(e,t){var a=document.getElementById("playerHealthBar");if(a.style.backgroundColor="darkgreen",e==t&&(a.style.height="4vh",a.style.width="80vw"),e<t){var n=e/t*80;a.style.width=n+"vw"}}(e.health,e.maxHealth)}),[e.health]),Object(c.useEffect)((function(){!function(e){var t=document.getElementById("armorBar");if(t.style.backgroundColor="lightblue",t.style.position="absolute",t.style.opacity=".75",0==e&&(t.style.height="4vh",t.style.width="0vw"),e>0){t.style.width=e+"vw"}}(e.armor)}),[e.armor]),o.a.createElement("div",{className:ne.a.playerHealthBorder},o.a.createElement("div",{className:ne.a.playerHealthIndicator},e.health," / ",e.maxHealth),o.a.createElement("div",{id:"playerHealthBar"}," "),o.a.createElement("div",{id:"armorBar"}," "))},ce=a(8),oe=a.n(ce);function le(e){try{return console.log("contents:",e.telegraphing),e.telegraphing[0].effect+" "+e.telegraphing[0].power}catch(t){return"..."}}var ie=function(){var e=k().health,t=k().total,a=k().armor,n=k();console.log("answer:",le(n));var r=le(n);return Object(c.useEffect)((function(){!function(e,t){var a=document.getElementById("foeHealthBar");if(a.style.backgroundColor="red",e==t&&(a.style.height="2vh",a.style.width="20vw"),e<t){var n=e/t*20,r=Math.ceil(e-n);a.style.width=r+"vw"}}(e,t)}),[e]),Object(c.useEffect)((function(){!function(e){var t=document.getElementById("foeArmorBar");if(t.style.backgroundColor="lightblue",t.style.opacity=".75",t.style.position="absolute",0==e&&(t.style.height="2vh",t.style.width="0vw"),e>0){var a=e/100*20;t.style.width=a+"vw"}}(a)}),[a]),o.a.createElement("div",{className:oe.a.foeZone},o.a.createElement("div",{className:oe.a.foe},o.a.createElement("div",{className:oe.a.telegraph}," ",r," "),o.a.createElement("div",{className:oe.a.foeTitle}," ",n.name," "),o.a.createElement("img",{className:oe.a.foeImg,src:n.art,alt:"foe img"}),o.a.createElement("div",{className:oe.a.foeHealthBorder},o.a.createElement("div",{className:oe.a.foeHealthIndicator},n.health," / ",n.total),o.a.createElement("div",{id:"foeArmorBar"}," "),o.a.createElement("div",{id:"foeHealthBar"}," "))))},de=a(25),ue=a.n(de),se=Object(m.a)("foe/UPDATE_ENCOUNTER"),me=Object(f.a)(Object(s.a)({},se,(function(e,t){return Object(_.a)({},e.encounter,{},t.payload)})),{}),fe=(Object(g.a)((function(e){return e.encounter}),(function(e){return e})),function(){var e=Object(h.b)();return o.a.createElement("button",{id:"turnBttn",onClick:function(){return e((function(e,t){var a=document.getElementById("playerZone");console.log("zone",a),a.style.height="58vh",a.style.width="100vw",a.style.backgroundColor="black",a.style.opacity=.75,a.style.position="absolute",document.getElementById("turnBttn");var n=document.getElementById("combatMsgs");n.innerHTML="Foes Turn!",setTimeout((function(){n.innerHTML="Waiting.",e(C())}),1e3),setTimeout((function(){n.innerHTML="Waiting.."}),1500),setTimeout((function(){n.innerHTML="Waiting..."}),2e3);var r=t(),c=r.player,o=r.foe,l=o.telegraphing;if("damage"==l[0].effect){var i=l[0].power,d=o.name+" uses "+l[0].name+" dealing\n"+l[0].power+" dmg";setTimeout((function(){n.innerHTML=d}),3e3);var u=c.armor-i;if(u<=0){var s=c.health+u;setTimeout((function(){e(B({health:s,armor:0}))}),4e3)}else{var m=u;setTimeout((function(){e(B({armor:m}))}),4e3)}}else if("armor"==l[0].effect){var f=l[0].power,h=o.name+" uses "+l[0].name+" gaining\n"+l[0].power+" armor";setTimeout((function(){n.innerHTML=h}),3e3),setTimeout((function(){e(w({armor:f}))}),4e3)}var g=o.moves,v=Object.keys(g).length,p=l[0].order;if(p+1<v){var y=p+1,b=g.filter((function(e){if(e.order===y)return e}));console.log("new Telegraph",b),setTimeout((function(){e(w({telegraphing:b}))}),4500)}else{var _=g.filter((function(e){if(0==e.order)return e}));console.log("new Telegraph",_),setTimeout((function(){e(w({telegraphing:_}))}),4500)}setTimeout((function(){n.innerHTML="Foe's Turn Over"}),5e3),setTimeout((function(){n.innerHTML="Armor & Energy Reset"}),6e3),setTimeout((function(){e(B({energy:3,armor:0}))}),6100),setTimeout((function(){n.innerHTML="Your Turn..."}),7e3),setTimeout((function(){e(I())}),7e3),setTimeout((function(){e(I())}),7300),setTimeout((function(){e(I())}),7600),setTimeout((function(){e(I())}),7900),setTimeout((function(){e(I()),a.style.height="0vh",a.style.width="0vw"}),8200)}))},className:ue.a.devButton},"[ END TURN ]")}),he={Title:Y,Encounter:function(){var e=k().health,t=Object(h.b)();return Object(c.useEffect)((function(){t(j()),t(M()),t(R())}),[]),Object(c.useEffect)((function(){console.log("encounter foe hp:",e)}),[e]),o.a.createElement("div",{className:U.a.game},o.a.createElement(re,null),o.a.createElement(ie,null),o.a.createElement("div",{id:"combatZone",className:U.a.combatZoneOverlay},o.a.createElement("div",{id:"combatMsgs",className:U.a.combatMsgs}," COMBAT MSGS "),o.a.createElement(fe,null)),o.a.createElement("div",{className:U.a.playerZone},o.a.createElement("div",{id:"playerZone"}," "),o.a.createElement(X,null),o.a.createElement(K,null),o.a.createElement(te,null)))}},ge=function(){var e=Object(h.c)(y),t=he[e];return o.a.createElement(t,null)},ve=a(5),pe=a(26),ye=a(27),be=Object(ve.combineReducers)({player:z,foe:T,screen:p,encounter:me});var _e=document.getElementById("root"),Oe=function(e){var t=[pe.a],a=[ve.applyMiddleware.apply(void 0,t)],n=ye.composeWithDevTools.apply(void 0,a);return Object(ve.createStore)(be,e,n)}();i.a.render(o.a.createElement(h.a,{store:Oe},o.a.createElement(ge,null)),_e)},7:function(e,t,a){e.exports={customButton:"hand_customButton__3kPiN",activeZone:"hand_activeZone__10s81",hand:"hand_hand__FpDVp",card:"hand_card__2Iyyc",titleSection:"hand_titleSection__2pM3q",title:"hand_title__2dma9",energy:"hand_energy__2Nf2i"}},8:function(e,t,a){e.exports={telegraph:"foe-zone_telegraph__L_jkd",foeTitle:"foe-zone_foeTitle__1YvQq",foeZone:"foe-zone_foeZone__2X4Y_",foe:"foe-zone_foe__1iF9l",foeImg:"foe-zone_foeImg__2luo9",foeHealthBorder:"foe-zone_foeHealthBorder__3gfyN",foeHealthBar:"foe-zone_foeHealthBar__275gY",foeHealthIndicator:"foe-zone_foeHealthIndicator__2NBhm"}}},[[28,1,2]]]);
//# sourceMappingURL=main.d4cb2c63.chunk.js.map